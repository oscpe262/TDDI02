Programmet MatLabb har i stort tre delsystem:

\begin{enumerate}
\item \verb+GUI+, Det grafiska användargränssnittet
\item \verb+Shell+, eller, det inre skalet som håller centrala objekt och variabler, t.ex. aktivt recept och portionskalning.
\item \verb+Lookup+, som tillhandahåller relevanta verktyg för kommunikation med databasen.
\end{enumerate}
\verb+GUI+ ansvarar för att skriva ut data från det inre systemet på skärmen i grafisk tappning. Användaren styr även systemet genom att interagera med menyer, knappar och strängfält snarare än att ge skriftliga hänvisningar till kommandoprompten. Information presenteras enligt konceptbilderna i (figur \ref{fig:vy1} - \ref{fig:vy4}). Det grafiska gränssnittet implementeras med hjälp av biblioteket Qt och kommer delvis designas i klienten Qt Creator.

Shell innehåller objekt av klasserna \verb+Recipe+, \verb+InfoIngredient+ och \verb+Lookup+ som datamedlemmar, där de två förstnämnda reflekterar det aktuella receptet och ingrediensen som vårt program interagerar med. Utåt tillhandahåller \verb+Shell+ publikt endast funktioner som kan tänkas motsvara alla möjliga handlingar från användaren. Denna grupp av funktioner inkluderar, men är ej begränsade till, funktionerna listade i figur \ref{fig:tekfunklist} (s. \pageref{fig:tekfunklist}).

\begin{figure}[h]
\caption{Funktioner för användarinputs}
\begin{tabular}{p{5.5cm}|p{8cm}}
\verb+addRecipe(string+) & Konstruerar ett nytt tomt \verb+Recipe+-objekt för datamedlemmen \verb+currentRecipe_+. Ett defaultargument av datatypen string existerar för att potentiellt tilldela ett namn. \\[1.2mm]
\verb+editRecipe()+ & Kallar på \verb+currentRecipe_.editRecipe()+ för att kunna ändra på dess datamedlemmar.\\[1.2mm]
\verb+importTxt(string)+ & Importering från textfil. Konstruerar ett nytt \verb+Recipe+-objekt och försöker fylla i dess datamedlemmar enligt en standardmodell.\\[1.2mm]
\verb+exportTxt()+ & Kallar på \verb+currentRecipe_.exportTxt(string)+ för att exportera till .txt. Kan modifieras för att först hämta ett annat recept från databasen för exportering.\\[1.2mm]
\verb+addIngredient(string)+ & Motsvarande \verb+addRecipe+. \\[1.2mm]
\verb+editIngredient(string)+ &  Motsvarande \verb+addIngredient+. \\[1.2mm]
\verb++&\\[1.2mm]
\verb+matchRecipe(string)+ & Levererar en sträng till \verb+Lookup+-objektet för att slå i databasen för exakt matchning. \\[1.2mm]
\verb+matchIngredient(string)+ &  Motsvarande \verb+matchRecipe+. \\[1.2mm]
\verb+searchRecipe(cont<SearchTerm*>)+ & Levererar söktermer i en godtycklig container till \verb+Lookup+. \verb+recipeSearchResults_+ tilldelas det resultat som \verb+Lookup+ ger.  \\[1.2mm]
\verb++&\\[1.2mm]
\verb++& get-funktioner som används av GUI:t och returnerar relevant data. 
\end{tabular}
\label{fig:tekfunklist}
\end{figure}

Objekt av klasserna \verb+Recipe+ och \verb+InfoIngredient+ kommer endast att existera i stabilt tillstånd som datamedlemmar i klassen \verb+Shell+. Nya objekt skapas antingen i samband med t.ex. funktionen \verb+addRecipe(string)+ eller byggs upp och returneras av \verb+Lookup+ som resultat av en matchning i databasen. Klasserna \verb+Recept+ och \verb+InfoIngredient+ innehåller främst fullständig data om ett specifikt recept/ingrediens, men även funktioner för implementeringen av \verb+Shell+s ``användarfunktioner'', t.ex. åtkomst och redigering. Lista över datamedlemmar i klassen \verb+Recipe+:
 
\begin{itemize}
\item \verb+string name_+ - \emph{Namn på receptet}
\item \verb+string description_+ - \emph{Beskrivning/utförande}
\item \verb+int minutesTime_+ - \emph{Tidsåtgång i minuter}
\item \verb+cont<string> comments_+ - \emph{Kommentarer i godtycklig container}
\item \verb+"referens" image_+ - \emph{Någon typ av referens för implentering av tillhörande bilder}
\item \verb+double grade_+ - \emph{Betyg}
\end{itemize}

\begin{itemize}
\item \verb+cont<RecipeIngredient> ingredients_+ - \emph{Ingredienser som ingår}
\item \verb+cont<RelatedRecipe> relatedRecipes_+ - \emph{Besläktade recept}
\end{itemize}

\verb+InfoIngredient+ och \verb+RecipeIngredient+ är för övrigt syskonklasser härledda från en abstrakt \verb+Ingredient+-klass, enligt ***REF DIAGRAM***.

\begin{itemize}
\item \verb+InfoIngredient+ representerar en ingrediens i sin egen existens. Utöver det gemensamma arvet så utökas \verb+InfoIngredient+ med ett stycke set-funktioner för att vid sparning i databasen kunna redigera en ingrediens' attribut. 
\item \verb+RecipeIngredient+ representerar en ingrediens som del av ett recept. Den klassen utökar sitt arv med två datamedlemmar, \verb+double amount_+ och \verb+"unittype" unit_+, för att hantera två ytterligare funktioner: \verb+getKcal(double scaling)+ och \verb+getPrice(double scaling)+.
\end{itemize}
 
\verb+RelatedRecipe+ är en särskild post med vissa särskilda krav, vars funktionalitet är avsedd för att agera datatyp för släktskap. Ett objekt av typen \verb+RelatedRecipe+ ska endast hänvisa släktskap med ett recept som hänvisar släktskap med det recept som objektet själv tillhör. Tanken är att strikt hålla kontroll så att inga enkelriktade släktskap ska kunna förekomma i databasen när vi väl tillför eller ändrar denna typ av information.

Endast ett objekt av klassen \verb+Lookup+ existerar i programmet och då som datamedlem av \verb+Shell+. \verb+Lookup+ ska inte hålla koll på några värden, utan fyller istället uppgiften att avgränsa funktionalitet och samla funktioner som har att göra med databaskommunikation på ett ställe.



    

